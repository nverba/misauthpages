<!DOCTYPE html>
<html lang="en">

<head>
  <title>Make it Social | Register</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE-edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Register to manage your group at Make it Social the group booking platform.">
  <meta name="author" content="Make it Social">
  <link rel="icon" href="/favicon.ico">
  <style>

  </style>
  <style>

    .row {
      width: 100%;
      height: 60px;
      text-align: center;
      margin: 10px 0;
    }

    .inputWrapper {
      display: inline-block;
      max-width: 300px;
      width: 100%;
      height: 60px;
      background-color: #87c7c7;
      line-height: 60px;
    }
  
    .inputWrapper label {
      position: absolute;
      top: -45px;
    }
    
    .sub {
      height: 60px;
      background-color: rgb(84, 46, 7);
      color: #fff;
      border: none;
    }
    
    @media (max-width: 700px) {
      
      .row {
        height: auto;
      }
      
     .inputWrapper {
       display: block;
       margin: 0 auto;
     }
     
    }
  
  </style>
</head>

<body>
  <div class="entire">
    <section class="loginreg">
      <div class="fields">
        {{if .Error}}
        <p style="color:red">{{.Error}}</p>
        {{end}}
        <form action="/register" method="post">
          <input type="hidden" name="csrf" value="{{.Csrf}}">
          <input type="hidden" name="redirect_to" value="{{.Redirect_to}}">
          <input type="hidden" name="app_id" value="{{.App_id}}">
          <input type="hidden" name="lang" value="{{.Lang}}">
          <input type="hidden" name="theme" value="{{.Theme}}">

          <div class="row">
            <div class="inputWrapper">
              <label>{{trans "EMAIL"}}</label>
              <input placeholder="{{trans " EMAIL "}}" type="email" name="username">
            </div>
            
            <div class="inputWrapper">
              <a href="/login" id="id_a"><span>{{trans "LOGIN_HERE"}}</span></a>
            </div>
          </div>

          <div class="row">
            <div class="inputWrapper">
              <label>{{trans "FIRST_NAME"}}</label>
              <input placeholder="{{trans " FIRST_NAME "}}" type="text" name="fn">
            </div>
            <div class="inputWrapper">
              <label>{{trans "LAST_NAME"}}</label>
              <input placeholder="{{trans " LAST_NAME "}}" type="text" name="sn">
            </div>
          </div>

          <div class="row">
            <div class="inputWrapper">
              <label>{{trans "PASSWORD"}}</label>
              <input placeholder="{{trans " PASSWORD "}}" type="password" name="password">
              <p class="small wrapped">Please ensure that your password is at least 8 characters long and includes at least 1 uppercase, 1 lowercase and
              1 digit character.</p>
            </div>

            <div class="inputWrapper">
              <label>{{trans "REPEAT_PASS"}}</label>
              <input placeholder="{{trans " REPEAT_PASS "}}" type="password" name="password2">
            </div>
          </div>

          <p id="recieveMail">
            Sign up to Make it Social newsletter
            <input class="toggle" type="checkbox" id="control1" name="sem">
          </p>
          <br>

          <div class="center margin">
            <button type="submit" class="sub">{{trans "REGISTER"}}</button>
          </div>

        </form>
      </div>
    </section>
  </div>


  <script>
    (function(){
        var a = document.getElementById('id_a'),
            href = a.getAttribute('href');
        if (window === top.window){
           // a.parentNode.style.display = 'inline-block';
        }
        if (href.indexOf('?')<0){
            var r = location.search.replace('login=0','login=1');
			if (r.indexOf('error=')>=0){
				var n = r.indexOf('error='), n2 = r.indexOf('&', n);
				r = r.substring(0,n)+r.substr(n2+1);
			}
            a.setAttribute('href', href + r);
        }
        var inps = document.querySelectorAll('input');
        for (var i=0; i<inps.length; i++){
            var inp = inps[i];
            inp.addEventListener('mousedown', function(e){
                var p = e.target;
                if (p && p.className) p.className = p.className.replace('redbox','');
            });
        }
        document.querySelector('form').addEventListener('submit', onsubmit);
    })();
    function validpass(p){
        return p.length > 7 && /[A-Z]+/.test(p) && /[a-z]+/.test(p) && /[0-9]+/.test(p);
    }
    function reden(e){
        if (e) e.className = (e.className || '') + ' redbox'; 
    }
	function onsubmit(e){
		var frm = e.target,
            em = frm.username.value,
            isem = /^[^@]+@[^@]+$/.test(em),
            fn = frm.fn.value,
			pw = frm.password.value,
            vpw = validpass(pw),
			pw2 = frm.password2.value,
            spw = pw2 == pw ? true : false;
        if (!isem) reden(frm.username);
        if (!fn) reden(frm.fn);
        if (!vpw) reden(frm.password);
        if (!spw) reden(frm.password2);
		if (!(isem && vpw && spw)) e.preventDefault();
	}

  </script>

</body>

</html>